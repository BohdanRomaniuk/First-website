<!DOCTYPE HTML>
<html ng-app="loadBalancer">
<head>
	<meta charset="utf-8">
	<title>СЛАР - Розвязування СЛАР Методом Хаусхолдера</title>
	<link rel="stylesheet" type="text/css" href="stylesheets/style.css"/>
</head>
<body ng-controller="indexController">
<table id="bar" width="100%" cellspacing=0 cellpadding=0 style="position:relative;">
  <tbody>
    <tr>
      <td height="39" class="list" align="center">
      <div style="max-width:1000px;">
		<a href="/">
			<div id="logo">Метод Хаусхолдера</div>
		</a>
        <ul id="navigation">
          <li ng-repeat="nav in navigationElems"><a id="{{ nav.name }}" href="{{ nav.href }}" ng-style="{{ nav.name }}">{{ nav.text }}</a></li>
		</ul>
      </div>
      </td>
    </tr>
  </tbody>
</table>
<div id="main-container">
	<div class="post-container" style="display: grid;">
		<h3>Вхідні дані та функції</h3>
		<div class="post-text">
			<form>
				<label>Кількість невідомих(розмір системи):</label>
				<input type="text" name="quantity" placeholder="наприклад 5" onchange="checkQuantity(this)"/>
				<button name="generate" class="btn buy" onclick="generateRandom()">Згенерувати випадково</button>
				</br>
				<label>Вхідна матриця</label>
				<textarea name="inputMatrix"  placeholder="" style="width:100%;height:300px;" ng-model="formData.matrix"></textarea>
				</br>
				<label>Вектор:</label>
				<input type="text" name="vector" placeholder="" style="width:100%" ng-model="formData.vector"/>
				</br>
				<label>Функції:</label>
				</br>
				<input type="submit" name="calculate" value="Розвязати систему" class="btn buy" ng-click="startCalculation()"/>
				<button name="abort" class="btn buy cancel">Зупинити розвязування</button>
			</form>
		</div>
	</div>
	<div class="post-container" style="display: grid;">
		<h3>Результати обчислень</h3>
		<div class="post-text" style="text-align: center;">
			<div class="progress" style="display:none;">Прогрес <span id="progress_percentage">0</span>%
				<img src="/images/loading.gif" alt="Loading..." style="max-width:120px;"/>
			</div>
			<div id="result">
			обрахунок...
			</div>
		</div>
	</div>
</div>
<script src="javascripts/jquery-2.2.4.min.js" type="text/javascript"></script>
<script src="javascripts/angular.min.js"></script>
<script src="javascripts/main.js"></script>
<script>
function checkQuantity(quantityElem)
{
	var quantity;
	if(parseInt(quantityElem.value))
	{
		quantity = parseInt(quantityElem.value);
	}
	else
	{
		alert("Кількість невідомих повинна бути цілого типу, більша 1");
		quantityElem.value = 2;
	}
	
	
	if(quantity>30)
	{
		alert("Кількість невідомих не може перевищувати 30");
		quantityElem.value = 30;
		quantity = 30;
	}
	else if(quantity<2)
	{
		alert("Кількість невідомих не може бути меншою рівною 1");
		quantityElem.value = 2;
		quantity = 2;
	}
	
	var textAreaPlaceholder = "";
	var textVectorPlaceholder = "";
	for(var i=0; i<quantity; ++i)
	{
		for(var j=0; j<quantity; ++j)
		{
			textAreaPlaceholder += "a"+(i+1)+"."+(j+1)+"\t";
		}
		textAreaPlaceholder+="\n";
		textVectorPlaceholder+= "b"+(i+1)+"\t";
	}
	document.getElementsByName("inputMatrix")[0].placeholder=textAreaPlaceholder;
	document.getElementsByName("vector")[0].placeholder=textVectorPlaceholder;
}

function generateRandom()
{
	var quantityElem = document.getElementsByName("quantity")[0];
	var quantity = parseInt(quantityElem.value);
	var randomMatrix="";
	var randomVector="";
	for(var i=0; i<quantity; ++i)
	{
		for(var j=0; j<quantity; ++j)
		{
			randomMatrix += Math.floor((Math.random() * 100) + 1) + " ";
		}
		randomMatrix += "\n";
		randomVector += Math.floor((Math.random() * 100) + 1) + " ";
	}
	document.getElementsByName("inputMatrix")[0].innerHTML=randomMatrix;
	document.getElementsByName("vector")[0].value=randomVector;
}
</script>
</body>
</html>